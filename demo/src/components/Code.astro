---
import { codeToHtml } from 'shiki';

export interface Props {
  code: string;
  lang: string;
  title?: string;
}

const { code, lang, title } = Astro.props;

const html = await codeToHtml(code, {
  lang,
  theme: 'github-dark'
});
---

{title && <h4>{title}</h4>}
<div class="code-block">
  <Fragment set:html={html} />
</div>

<style>
  .code-block {
    margin: 1rem 0;
    border-radius: 0.5rem;
    overflow: hidden;
  }
  
  :global(.code-block pre) {
    margin: 0 !important;
    padding: 1rem !important;
    font-size: 0.875rem;
    line-height: 1.5;
    overflow-x: auto;
  }
</style>